(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(20),a=n.n(r),o=(n(25),n(11)),i=n(9),s=n(3),u=(n(26),n(0)),l=function(e){var t=e.person;return Object(u.jsxs)("p",{children:[" ",t.name," ",t.number]})},j=function(e){var t=e.handleFilter,n=e.handleOnChangeFilter,c=e.filterby,r=e.filtered;return Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{onSubmit:t,children:["filter shown with:"," ",Object(u.jsx)("input",{type:"text",onChange:n,value:c})]}),c.length<=0?" ":r.map((function(e){return Object(u.jsx)(l,{person:e},e.title)}))]})},d=n(4),b=n.n(d),h="/api/persons",f=function(e){var t=e.person,n=e.setUpdateList;return Object(u.jsx)("li",{children:Object(u.jsxs)("p",{children:[Object(u.jsx)("strong",{children:t.name})," ",t.number," ",Object(u.jsx)("button",{onClick:function(){if(window.confirm("Delete ".concat(t.name,"?"))){var e=t.id,c=Object.values(t).filter((function(t){return t.id!==e}));console.log(c),function(e,t){return b.a.delete("".concat(h,"/").concat(e),t).then((function(e){return e.data}))}(e,c).then(n(!0))}},children:"Delete"})]})})},O=function(e){var t=e.person,n=e.setUpdateList;return Object(u.jsx)("ul",{children:t.map((function(e){return Object(u.jsx)(f,{person:e,setUpdateList:n},e.name)}))})},p=function(e){var t=e.handleSubmit,n=e.handleOnChangeTitle,c=e.newTitle,r=e.handleOnChangeBody,a=e.newBody;return Object(u.jsxs)("form",{onSubmit:t,children:[Object(u.jsxs)("div",{children:["Name:"," ",Object(u.jsx)("input",{type:"text",onChange:n,value:c})]}),Object(u.jsxs)("div",{children:["Number:"," ",Object(u.jsx)("input",{type:"text",onChange:r,value:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var t=e.message;return null===t?null:Object(u.jsx)("div",{className:"error",children:t})},x=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),l=Object(s.a)(a,2),d=l[0],f=l[1],x=Object(c.useState)(""),v=Object(s.a)(x,2),g=v[0],w=v[1],y=Object(c.useState)(""),S=Object(s.a)(y,2),C=S[0],k=S[1],L=Object(c.useState)([""]),N=Object(s.a)(L,2),F=N[0],B=N[1],D=Object(c.useState)(!1),T=Object(s.a)(D,2),U=T[0],E=T[1],A=Object(c.useState)("some error happened..."),J=Object(s.a)(A,2),P=J[0],q=J[1];Object(c.useEffect)((function(){b.a.get(h).then((function(e){return e.data})).then((function(e){r(Object(i.a)(e))})).then(E(!1))}),[U]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(m,{message:P}),Object(u.jsx)(j,{handleFilter:function(e){e.preventDefault();var t=n.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));0===t.length?(alert("Person not found"),B([])):B(Object(i.a)(t))},handleOnChangeFilter:function(e){k(e.target.value)},filterby:C,filtered:F}),Object(u.jsx)("h3",{children:" add a new"}),Object(u.jsx)(p,{handleSubmit:function(e){e.preventDefault();var t,c,a={name:d,number:g};if(""===d||""===g)alert("Fields can't be empty");else if(n.some((function(e){return e.name===d}))){var s=n.find((function(e){return e.name===d}));if(console.log(s),window.confirm("".concat(s.name," is already added to phonebook, replace the old number with a new one?"))){var u=Object(o.a)(Object(o.a)({},s),{},{number:a.number});console.log(u),(t=s.id,c=u,b.a.put("".concat(h,"/").concat(t),c).then((function(e){return e.data}))).then(E(!0)).catch((function(e){console.log(e.response.data),setTimeout((function(){q(null)}),5e3)}))}}else r([].concat(Object(i.a)(n),[a])),console.log(a),function(e){return b.a.post(h,e).then((function(e){return e.data}))}(a).catch((function(e){var t=e.response.data.toString();console.log(t),console.log(e.response.data),console.log(e.response.data)}));Array.from(document.querySelectorAll("input")).forEach((function(e){return e.value=""}))},handleOnChangeTitle:function(e){f(e.target.value)},handleOnChangeBody:function(e){w(e.target.value)},newName:d,newNumber:g}),Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)(O,{person:n,setUpdateList:E})]})};a.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.9fcbc9e1.chunk.js.map