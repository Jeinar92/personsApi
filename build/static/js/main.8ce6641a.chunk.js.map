{"version":3,"sources":["Filter/NoteFiltered.js","Filter/Filter.js","Services/ApiCalls.js","Persons/Person.js","Persons/Persons.js","PersonForm.js","ErrorMsg.js","App.js","index.js"],"names":["NoteFiltered","person","name","number","Filter","handleFilter","handleOnChangeFilter","filterby","filtered","onSubmit","type","onChange","value","length","map","filter","title","baseUrl","Person","setUpdateList","onClick","window","confirm","id","personToDelete","Object","values","pers","console","log","newObject","axios","delete","then","response","data","deleteName","Persons","PersonForm","handleSubmit","handleOnChangeTitle","newName","newTitle","handleOnChangeBody","newNumber","newBody","ErrorNotification","message","className","App","useState","persons","setPerson","setNewName","setNewNumber","setNewFilter","setFiltered","updateList","errorMessage","setErrorMessage","useEffect","get","event","preventDefault","filteredTitles","toLowerCase","includes","alert","target","personToAddToState","some","personToReplace","find","changedPerson","put","catch","error","setTimeout","post","create","Array","from","document","querySelectorAll","forEach","input","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.8ce6641a.chunk.js","sourcesContent":["\r\nexport const NoteFiltered = ({ person }) => {\r\n    return (\r\n      <p>\r\n        {\" \"}\r\n          {person.name} {person.number}\r\n      </p>\r\n    );\r\n  };","import { NoteFiltered } from \"./NoteFiltered\";\r\n\r\nexport const Filter = ({ handleFilter, handleOnChangeFilter, filterby, filtered }) => {\r\n    return (\r\n      <div>\r\n        <form onSubmit={handleFilter}>\r\n          filter shown with:{\" \"}\r\n          <input type=\"text\" onChange={handleOnChangeFilter} value={filterby} />\r\n        </form>\r\n        {filterby.length <= 0\r\n          ? \" \"\r\n          : filtered.map((filter) => (\r\n              <NoteFiltered key={filter.title} person={filter} />\r\n            ))}\r\n      </div>\r\n    );\r\n  };","import axios from \"axios\";\r\n\r\nconst baseUrl = '/api/persons'; \r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)  \r\n  return request.then(response => response.data)  \r\n}\r\nconst create = newObject => {    \r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\nconst deleteName = (id, newObject) =>{\r\n  const request = axios.delete(`${baseUrl}/${id}`, newObject);  \r\n  return request\r\n  .then(response => response.data)\r\n}\r\nconst replace = (name, newObject) =>{\r\n  const request = axios.put(`${baseUrl}/${name}`, newObject);\r\n  return request.then(response => response.data);\r\n}\r\nconst update = (newObject) =>{\r\n  const request = axios.put(`${baseUrl}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\nexport {getAll,create, deleteName, replace, update}","import { deleteName } from \"../Services/ApiCalls\";\r\nexport const Person = ({ person, setUpdateList }) => {  \r\n  const deleteFromList = () =>{\r\n    if(window.confirm(`Delete ${person.name}?`)){\r\n      const id = person.id;\r\n      const personToDelete = Object.values(person).filter(pers => pers.id !== id);\r\n      console.log(personToDelete);    \r\n      deleteName(id,personToDelete)\r\n      .then(setUpdateList(true))}    \r\n  }\r\n    return (\r\n      <li>\r\n        <p>\r\n          <strong>{person.name}</strong> {person.number} <button \r\n          onClick={deleteFromList}>Delete</button>\r\n        </p>\r\n      </li>\r\n    );\r\n  };","import {Person} from './Person.js'\r\nexport const Persons = ({ person , setUpdateList }) => {\r\n    return (\r\n      <ul>\r\n        {person.map((person) => (\r\n          <Person key={person.name} person={person}  setUpdateList={setUpdateList } />\r\n        ))}\r\n      </ul>\r\n    );\r\n  };","export const PersonForm = ({\r\n    handleSubmit,\r\n    handleOnChangeTitle,\r\n    newTitle: newName,\r\n    handleOnChangeBody,\r\n    newBody: newNumber\r\n  }) => {\r\n    return (\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          Name:{\" \"}\r\n          <input type=\"text\" onChange={handleOnChangeTitle} value={newName} />\r\n        </div>\r\n        <div>\r\n          Number:{\" \"}\r\n          <input type=\"text\" onChange={handleOnChangeBody} value={newNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    );\r\n  };"," const ErrorNotification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default ErrorNotification","import \"./App.css\";\nimport React, { useState, useEffect } from \"react\";\nimport { Filter } from \"./Filter/Filter\";\nimport { Persons } from \"./Persons/Persons\";\nimport { PersonForm } from \"./PersonForm\";\nimport { getAll,create, replace} from \"./Services/ApiCalls\"; \nimport ErrorNotification from \"./ErrorMsg\";\n\n\nconst App = () => {\n  const [persons, setPerson] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterby, setNewFilter] = useState(\"\");\n  const [filtered, setFiltered] = useState([\"\"]);\n  const [updateList, setUpdateList] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('some error happened...')\n\n  useEffect(() => {\n    getAll()\n    .then(data =>{\n      setPerson([...data])      \n    })\n    .then(setUpdateList(false));\n  },[updateList]);\n\n  const handleOnChangeTitle = (event) => {\n    setNewName(event.target.value);\n  };\n  const handleReset = () => {\n    Array.from(document.querySelectorAll(\"input\")).forEach(\n      input => (input.value = \"\")\n    );\n  };\n  const handleOnChangeBody = (event) => {\n    setNewNumber(event.target.value);\n  };\n  const handleOnChangeFilter = (event) => {\n    setNewFilter(event.target.value);\n  };\n  const handleFilter = (event) => {\n    event.preventDefault();\n    const filteredTitles = persons.filter((person) =>\n      person.name.toLowerCase().includes(filterby.toLowerCase())\n    );\n    if (filteredTitles.length === 0) {\n      alert(\"Person not found\");\n      setFiltered([]);\n    } else {\n      setFiltered([...filteredTitles]);\n    }    \n  };\n  const handleSubmit = (event) => {\n    event.preventDefault();   \n    \n    const personToAddToState = {\n      name: newName,\n      number: newNumber\n    };\n    if (newName === \"\" || newNumber === \"\") {\n      alert(\"Fields can't be empty\");\n    } else if (persons.some(({ name }) => name === newName)) {\n      const personToReplace = persons.find(pers => pers.name === newName)\n      console.log(personToReplace)\n      if(window.confirm(`${personToReplace.name} is already added to phonebook, replace the old number with a new one?`)){\n        const changedPerson = {...personToReplace, number: personToAddToState.number}\n        console.log(changedPerson)\n        replace(personToReplace.id, changedPerson).then(setUpdateList(true)).catch(error => {\n          //setErrorMessage(`Person ${personToReplace.name} was already removed from server`)\n          console.log(error.response.data)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n      }\n    } else {\n      setPerson([...persons,personToAddToState]);\n      console.log(personToAddToState);\n      create(personToAddToState).catch(error => {\n        setErrorMessage(error.response.data)\n        console.log(error.response.data)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }    \n    handleReset();\n  };\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <ErrorNotification message={errorMessage} />\n      <Filter\n        handleFilter={handleFilter}\n        handleOnChangeFilter={handleOnChangeFilter}\n        filterby={filterby}\n        filtered={filtered}\n      />\n      <h3> add a new</h3>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        handleOnChangeTitle={handleOnChangeTitle}\n        handleOnChangeBody={handleOnChangeBody}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        person={persons}\n        setUpdateList={setUpdateList}\n      />\n    </div>\n  );\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}